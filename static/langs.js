// Multi-language support for IPFSBED
let currentLang = localStorage.getItem('ipfsbed_lang') || 'zh-CN';

// Dictionary for translations
const translations = {
  'zh-CN': {
    'meta-title': 'IPFSBED - 去中心化IPFS文件托管服务',
    'upload-title': '上传文件',
    'file-list': '个文件',
    'drop-zone': '点击上传 / 粘贴上传 / 拖拽文件或文件夹上传',
    'drop-zone-desc': '去中心化保存和共享文件',
    'gateway-selector': '选择网关：',
    'copy-link': '复制链接',
    'copy-share-link': '复制分享链接',
    'copy-all': '复制全部',
    'passphrase-placeholder': '口令（可选）',
    'batch-share-passphrase-placeholder': '口令（可选）',
    'select-all': '全选',
    'deselect-all-btn': '取消全选',
    'share-selected': '批量分享',
    'select-for-batch-sharing': '选择进行批量分享',
    'batch-share-passphrase-title': '设置批量分享口令',
    'batch-share-confirm-copy': '确认并复制链接',
    'batch-share-cancel': '取消',
    'batch-share-link-copied': '批量分享链接已复制到剪贴板',
    'batch-encryption-failed': '批量加密失败',
    'show-password': '显示密码',
    'hide-password': '隐藏密码',
    'upload-success': '上传成功！',
    'upload-error': '上传失败！',
    'clipboard-empty': '剪贴板为空！',
    'clipboard-no-file': '剪贴板中没有图片！',
    'unsupported-type': '不支持的文件类型！',
    'file-too-large': '文件太大！最大 {size}MB',
    'file-size': '文件大小：{size}',
    'all-apis-failed': '所有API都失败了',
    'no-files-selected': '未选择任何文件',
    'selected-files-invalid': '所选文件无效',
    'copied-format': '已复制{format}',
    'copied-all': '已复制所有链接',
    'encryption-failed': '加密失败',
    'decryption-failed': '解密失败',
    'passphrase-incorrect': '口令错误',
    'accessing-file': '正在访问文件...',
    'file-will-be-public': '文件将以公开方式分享',
    'download-button': '下载文件',
    'download-progress': '下载进度',
    'return-home': '返回首页',
    'passphrase-prompt-title': '输入口令',
    'passphrase-prompt-label': '口令：',
    'passphrase-submit': '解锁',
    'project-repo': '项目地址',
    'more-gateways': '更多网关',
    'copyright-text': '© {year} IPFSBED - 基于IPFS的去中心化文件托管服务',
    'upload-list': '上传列表',
  },
  'en': {
    'meta-title': 'IPFSBED - Decentralized IPFS File Hosting Service',
    'upload-title': 'Upload Files',
    'file-list': 'files',
    'drop-zone': 'Click / Paste / Drag & Drop Files or Folders to upload',
    'drop-zone-desc': 'Decentralized save and share files',
    'gateway-selector': 'Select Gateway:',
    'copy-link': 'Copy Link',
    'copy-share-link': 'Copy Share Link',
    'copy-all': 'Copy All',
    'passphrase-placeholder': 'Passphrase (optional)',
    'batch-share-passphrase-placeholder': 'Passphrase (optional)',
    'select-all': 'Select All',
    'deselect-all-btn': 'Deselect All',
    'share-selected': 'Batch Share',
    'select-for-batch-sharing': 'Select for batch sharing',
    'batch-share-passphrase-title': 'Set batch share passphrase',
    'batch-share-confirm-copy': 'Confirm & Copy Link',
    'batch-share-cancel': 'Cancel',
    'batch-share-link-copied': 'Batch share link copied to clipboard',
    'batch-encryption-failed': 'Batch encryption failed',
    'show-password': 'Show Password',
    'hide-password': 'Hide Password',
    'upload-success': 'Upload successful!',
    'upload-error': 'Upload failed!',
    'clipboard-empty': 'Clipboard is empty!',
    'clipboard-no-file': 'No image in clipboard!',
    'unsupported-type': 'Unsupported file type!',
    'file-too-large': 'File too large! Max {size}MB',
    'file-size': 'File size: {size}',
    'all-apis-failed': 'All APIs failed',
    'no-files-selected': 'No files selected',
    'selected-files-invalid': 'Selected files invalid',
    'copied-format': '{format} copied',
    'copied-all': 'All links copied',
    'encryption-failed': 'Encryption failed',
    'decryption-failed': 'Decryption failed',
    'passphrase-incorrect': 'Incorrect passphrase',
    'accessing-file': 'Accessing file...',
    'file-will-be-public': 'File will be shared publicly',
    'download-button': 'Download File',
    'download-progress': 'Download Progress',
    'return-home': 'Return Home',
    'passphrase-prompt-title': 'Enter Passphrase',
    'passphrase-prompt-label': 'Passphrase:',
    'passphrase-submit': 'Unlock',
    'project-repo': 'Project Repository',
    'more-gateways': 'More Gateways',
    'copyright-text': '© {year} IPFSBED - Decentralized IPFS File Hosting Service',
    'upload-list': 'Upload List',
  },
  'de': {
    'meta-title': 'IPFSBED - Dezentraler IPFS-Dateihosting-Dienst',
    'upload-title': 'Dateien hochladen',
    'file-list': 'Dateien',
    'drop-zone': 'Klicken / Einfügen / Ziehen & Ablegen von Dateien oder Ordnern zum Hochladen',
    'drop-zone-desc': 'Dezentrales Speichern und Teilen von Dateien',
    'gateway-selector': 'Gateway auswählen:',
    'copy-link': 'Link kopieren',
    'copy-share-link': 'Freigabelink kopieren',
    'copy-all': 'Alle kopieren',
    'passphrase-placeholder': 'Passwort (optional)',
    'batch-share-passphrase-placeholder': 'Passwort (optional)',
    'select-all': 'Alle auswählen',
    'deselect-all-btn': 'Auswahl aufheben',
    'share-selected': 'Stapelfreigabe',
    'select-for-batch-sharing': 'Für Stapelfreigabe auswählen',
    'batch-share-passphrase-title': 'Stapelfreigabe-Passwort festlegen',
    'batch-share-confirm-copy': 'Bestätigen & Link kopieren',
    'batch-share-cancel': 'Abbrechen',
    'batch-share-link-copied': 'Stapelfreigabelink in die Zwischenablage kopiert',
    'batch-encryption-failed': 'Stapelverschlüsselung fehlgeschlagen',
    'show-password': 'Passwort anzeigen',
    'hide-password': 'Passwort verbergen',
    'upload-success': 'Hochladen erfolgreich!',
    'upload-error': 'Hochladen fehlgeschlagen!',
    'clipboard-empty': 'Zwischenablage ist leer!',
    'clipboard-no-file': 'Kein Bild in der Zwischenablage!',
    'unsupported-type': 'Nicht unterstützter Dateityp!',
    'file-too-large': 'Datei zu groß! Maximal {size}MB',
    'file-size': 'Dateigröße: {size}',
    'all-apis-failed': 'Alle APIs fehlgeschlagen',
    'no-files-selected': 'Keine Dateien ausgewählt',
    'selected-files-invalid': 'Ausgewählte Dateien ungültig',
    'copied-format': '{format} kopiert',
    'copied-all': 'Alle Links kopiert',
    'encryption-failed': 'Verschlüsselung fehlgeschlagen',
    'decryption-failed': 'Entschlüsselung fehlgeschlagen',
    'passphrase-incorrect': 'Falsches Passwort',
    'accessing-file': 'Datei wird zugegriffen...',
    'file-will-be-public': 'Datei wird öffentlich geteilt',
    'download-button': 'Datei herunterladen',
    'download-progress': 'Download-Fortschritt',
    'return-home': 'Zurück zur Startseite',
    'passphrase-prompt-title': 'Passwort eingeben',
    'passphrase-prompt-label': 'Passwort:',
    'passphrase-submit': 'Entsperren',
    'project-repo': 'Projektrepository',
    'more-gateways': 'Weitere Gateways',
    'copyright-text': '© {year} IPFSBED - Dezentraler IPFS-Dateihosting-Dienst',
    'upload-list': 'Upload-Liste',
  },
  'ru': {
    'meta-title': 'IPFSBED - Децентрализованный сервис хостинга файлов IPFS',
    'upload-title': 'Загрузить файлы',
    'file-list': 'файлы',
    'drop-zone': 'Нажмите / Вставьте / Перетащите файлы или папки для загрузки',
    'drop-zone-desc': 'Децентрализованное сохранение и обмен файлами',
    'gateway-selector': 'Выберите шлюз:',
    'copy-link': 'Копировать ссылку',
    'copy-share-link': 'Копировать ссылку для обмена',
    'copy-all': 'Копировать все',
    'passphrase-placeholder': 'Пароль (опционально)',
    'batch-share-passphrase-placeholder': 'Пароль (опционально)',
    'select-all': 'Выбрать все',
    'deselect-all-btn': 'Отменить выбор',
    'share-selected': 'Пакетный обмен',
    'select-for-batch-sharing': 'Выберите для пакетного обмена',
    'batch-share-passphrase-title': 'Установить пароль для пакетного обмена',
    'batch-share-confirm-copy': 'Подтвердить и скопировать ссылку',
    'batch-share-cancel': 'Отмена',
    'batch-share-link-copied': 'Ссылка для пакетного обмена скопирована в буфер обмена',
    'batch-encryption-failed': 'Пакетное шифрование не удалось',
    'show-password': 'Показать пароль',
    'hide-password': 'Скрыть пароль',
    'upload-success': 'Загрузка успешна!',
    'upload-error': 'Ошибка загрузки!',
    'clipboard-empty': 'Буфер обмена пуст!',
    'clipboard-no-file': 'В буфере обмена нет изображения!',
    'unsupported-type': 'Неподдерживаемый тип файла!',
    'file-too-large': 'Файл слишком большой! Максимум {size}МБ',
    'file-size': 'Размер файла: {size}',
    'all-apis-failed': 'Все API не работают',
    'no-files-selected': 'Файлы не выбраны',
    'selected-files-invalid': 'Выбранные файлы недействительны',
    'copied-format': '{format} скопирован',
    'copied-all': 'Все ссылки скопированы',
    'encryption-failed': 'Ошибка шифрования',
    'decryption-failed': 'Ошибка расшифровки',
    'passphrase-incorrect': 'Неверный пароль',
    'accessing-file': 'Доступ к файлу...',
    'file-will-be-public': 'Файл будет доступен публично',
    'download-button': 'Скачать файл',
    'download-progress': 'Прогресс загрузки',
    'return-home': 'Вернуться на главную',
    'passphrase-prompt-title': 'Введите пароль',
    'passphrase-prompt-label': 'Пароль:',
    'passphrase-submit': 'Разблокировать',
    'project-repo': 'Репозиторий проекта',
    'more-gateways': 'Больше шлюзов',
    'copyright-text': '© {year} IPFSBED - Децентрализованный сервис хостинга файлов IPFS',
    'upload-list': 'Список загрузок',
  },
  'fr': {
    'meta-title': 'IPFSBED - Service d\'hébergement de fichiers IPFS décentralisé',
    'upload-title': 'Télécharger des fichiers',
    'file-list': 'fichiers',
    'drop-zone': 'Cliquez / Collez / Glissez-déposez des fichiers ou des dossiers pour télécharger',
    'drop-zone-desc': 'Sauvegarde et partage de fichiers décentralisés',
    'gateway-selector': 'Sélectionner la passerelle:',
    'copy-link': 'Copier le lien',
    'copy-share-link': 'Copier le lien de partage',
    'copy-all': 'Tout copier',
    'passphrase-placeholder': 'Phrase secrète (optionnel)',
    'batch-share-passphrase-placeholder': 'Phrase secrète (optionnel)',
    'select-all': 'Tout sélectionner',
    'deselect-all-btn': 'Désélectionner tout',
    'share-selected': 'Partage groupé',
    'select-for-batch-sharing': 'Sélectionner pour partage groupé',
    'batch-share-passphrase-title': 'Définir la phrase secrète pour le partage groupé',
    'batch-share-confirm-copy': 'Confirmer et copier le lien',
    'batch-share-cancel': 'Annuler',
    'batch-share-link-copied': 'Lien de partage groupé copié dans le presse-papiers',
    'batch-encryption-failed': 'Échec du chiffrement groupé',
    'show-password': 'Afficher le mot de passe',
    'hide-password': 'Masquer le mot de passe',
    'upload-success': 'Téléchargement réussi!',
    'upload-error': 'Échec du téléchargement!',
    'clipboard-empty': 'Le presse-papiers est vide!',
    'clipboard-no-file': 'Pas d\'image dans le presse-papiers!',
    'unsupported-type': 'Type de fichier non pris en charge!',
    'file-too-large': 'Fichier trop volumineux! Maximum {size}MB',
    'file-size': 'Taille du fichier: {size}',
    'all-apis-failed': 'Toutes les API ont échoué',
    'no-files-selected': 'Aucun fichier sélectionné',
    'selected-files-invalid': 'Fichiers sélectionnés invalides',
    'copied-format': '{format} copié',
    'copied-all': 'Tous les liens copiés',
    'encryption-failed': 'Échec du chiffrement',
    'decryption-failed': 'Échec du déchiffrement',
    'passphrase-incorrect': 'Phrase secrète incorrecte',
    'accessing-file': 'Accès au fichier...',
    'file-will-be-public': 'Le fichier sera partagé publiquement',
    'download-button': 'Télécharger le fichier',
    'download-progress': 'Progression du téléchargement',
    'return-home': 'Retour à l\'accueil',
    'passphrase-prompt-title': 'Entrez la phrase secrète',
    'passphrase-prompt-label': 'Phrase secrète:',
    'passphrase-submit': 'Déverrouiller',
    'project-repo': 'Dépôt du projet',
    'more-gateways': 'Plus de passerelles',
    'copyright-text': '© {year} IPFSBED - Service d\'hébergement de fichiers IPFS décentralisé',
    'upload-list': 'Liste des téléchargements',
  },
  'es': {
    'meta-title': 'IPFSBED - Servicio de alojamiento de archivos IPFS descentralizado',
    'upload-title': 'Subir archivos',
    'file-list': 'archivos',
    'drop-zone': 'Haga clic / Pegue / Arrastre y suelte archivos o carpetas para subir',
    'drop-zone-desc': 'Guarde y comparta archivos de forma descentralizada',
    'gateway-selector': 'Seleccionar puerta de enlace:',
    'copy-link': 'Copiar enlace',
    'copy-share-link': 'Copiar enlace para compartir',
    'copy-all': 'Copiar todo',
    'passphrase-placeholder': 'Contraseña (opcional)',
    'batch-share-passphrase-placeholder': 'Contraseña (opcional)',
    'select-all': 'Seleccionar todo',
    'deselect-all-btn': 'Deseleccionar todo',
    'share-selected': 'Compartir por lotes',
    'select-for-batch-sharing': 'Seleccionar para compartir por lotes',
    'batch-share-passphrase-title': 'Establecer contraseña para compartir por lotes',
    'batch-share-confirm-copy': 'Confirmar y copiar enlace',
    'batch-share-cancel': 'Cancelar',
    'batch-share-link-copied': 'Enlace de compartir por lotes copiado al portapapeles',
    'batch-encryption-failed': 'Error en el cifrado por lotes',
    'show-password': 'Mostrar contraseña',
    'hide-password': 'Ocultar contraseña',
    'upload-success': '¡Subida exitosa!',
    'upload-error': '¡Error al subir!',
    'clipboard-empty': '¡El portapapeles está vacío!',
    'clipboard-no-file': '¡No hay imagen en el portapapeles!',
    'unsupported-type': '¡Tipo de archivo no compatible!',
    'file-too-large': '¡Archivo demasiado grande! Máximo {size}MB',
    'file-size': 'Tamaño del archivo: {size}',
    'all-apis-failed': 'Todas las API fallaron',
    'no-files-selected': 'No se seleccionaron archivos',
    'selected-files-invalid': 'Archivos seleccionados no válidos',
    'copied-format': '{format} copiado',
    'copied-all': 'Todos los enlaces copiados',
    'encryption-failed': 'Error de cifrado',
    'decryption-failed': 'Error de descifrado',
    'passphrase-incorrect': 'Contraseña incorrecta',
    'accessing-file': 'Accediendo al archivo...',
    'file-will-be-public': 'El archivo se compartirá públicamente',
    'download-button': 'Descargar archivo',
    'download-progress': 'Progreso de descarga',
    'return-home': 'Volver al inicio',
    'passphrase-prompt-title': 'Introducir contraseña',
    'passphrase-prompt-label': 'Contraseña:',
    'passphrase-submit': 'Desbloquear',
    'project-repo': 'Repositorio del proyecto',
    'more-gateways': 'Más puertas de enlace',
    'copyright-text': '© {year} IPFSBED - Servicio de alojamiento de archivos IPFS descentralizado',
    'upload-list': 'Lista de subidas',
  },
  'ar': {
    'meta-title': 'IPFSBED - خدمة استضافة ملفات IPFS اللامركزية',
    'upload-title': 'رفع الملفات',
    'file-list': 'ملفات',
    'drop-zone': 'انقر / الصق / اسحب وأفلت الملفات أو المجلدات للتحميل',
    'drop-zone-desc': 'حفظ ومشاركة الملفات بطريقة لامركزية',
    'gateway-selector': 'اختر البوابة:',
    'copy-link': 'نسخ الرابط',
    'copy-share-link': 'نسخ رابط المشاركة',
    'copy-all': 'نسخ الكل',
    'passphrase-placeholder': 'كلمة المرور (اختياري)',
    'batch-share-passphrase-placeholder': 'كلمة المرور (اختياري)',
    'select-all': 'تحديد الكل',
    'deselect-all-btn': 'إلغاء تحديد الكل',
    'share-selected': 'مشاركة متعددة',
    'select-for-batch-sharing': 'تحديد للمشاركة المتعددة',
    'batch-share-passphrase-title': 'تعيين كلمة المرور للمشاركة المتعددة',
    'batch-share-confirm-copy': 'تأكيد ونسخ الرابط',
    'batch-share-cancel': 'إلغاء',
    'batch-share-link-copied': 'تم نسخ رابط المشاركة المتعددة إلى الحافظة',
    'batch-encryption-failed': 'فشل التشفير المتعدد',
    'show-password': 'إظهار كلمة المرور',
    'hide-password': 'إخفاء كلمة المرور',
    'upload-success': 'تم الرفع بنجاح!',
    'upload-error': 'فشل الرفع!',
    'clipboard-empty': 'الحافظة فارغة!',
    'clipboard-no-file': 'لا توجد صورة في الحافظة!',
    'unsupported-type': 'نوع ملف غير مدعوم!',
    'file-too-large': 'الملف كبير جدًا! الحد الأقصى {size} ميجابايت',
    'file-size': 'حجم الملف: {size}',
    'all-apis-failed': 'فشلت جميع واجهات البرمجة',
    'no-files-selected': 'لم يتم تحديد ملفات',
    'selected-files-invalid': 'الملفات المحددة غير صالحة',
    'copied-format': 'تم نسخ {format}',
    'copied-all': 'تم نسخ جميع الروابط',
    'encryption-failed': 'فشل التشفير',
    'decryption-failed': 'فشل فك التشفير',
    'passphrase-incorrect': 'كلمة المرور غير صحيحة',
    'accessing-file': 'جارٍ الوصول إلى الملف...',
    'file-will-be-public': 'سيتم مشاركة الملف بشكل عام',
    'download-button': 'تنزيل الملف',
    'download-progress': 'تقدم التنزيل',
    'return-home': 'العودة إلى الصفحة الرئيسية',
    'passphrase-prompt-title': 'أدخل كلمة المرور',
    'passphrase-prompt-label': 'كلمة المرور:',
    'passphrase-submit': 'فتح',
    'project-repo': 'مستودع المشروع',
    'more-gateways': 'المزيد من البوابات',
    'copyright-text': '© {year} IPFSBED - خدمة استضافة ملفات IPFS اللامركزية',
    'upload-list': 'قائمة التحميل',
  },
  'fa': {
    'meta-title': 'IPFSBED - سرویس میزبانی فایل IPFS غیرمتمرکز',
    'upload-title': 'آپلود فایل‌ها',
    'file-list': 'فایل‌ها',
    'drop-zone': 'کلیک کنید / بچسبانید / فایل‌ها یا پوشه‌ها را بکشید و رها کنید برای آپلود',
    'drop-zone-desc': 'ذخیره و اشتراک‌گذاری فایل‌ها به صورت غیرمتمرکز',
    'gateway-selector': 'انتخاب دروازه:',
    'copy-link': 'کپی لینک',
    'copy-share-link': 'کپی لینک اشتراک‌گذاری',
    'copy-all': 'کپی همه',
    'passphrase-placeholder': 'رمز عبور (اختیاری)',
    'batch-share-passphrase-placeholder': 'رمز عبور (اختیاری)',
    'select-all': 'انتخاب همه',
    'deselect-all-btn': 'لغو انتخاب همه',
    'share-selected': 'اشتراک‌گذاری دسته‌ای',
    'select-for-batch-sharing': 'انتخاب برای اشتراک‌گذاری دسته‌ای',
    'batch-share-passphrase-title': 'تنظیم رمز عبور برای اشتراک‌گذاری دسته‌ای',
    'batch-share-confirm-copy': 'تأیید و کپی لینک',
    'batch-share-cancel': 'لغو',
    'batch-share-link-copied': 'لینک اشتراک‌گذاری دسته‌ای در کلیپ‌بورد کپی شد',
    'batch-encryption-failed': 'رمزگذاری دسته‌ای ناموفق بود',
    'show-password': 'نمایش رمز عبور',
    'hide-password': 'پنهان کردن رمز عبور',
    'upload-success': 'آپلود با موفقیت انجام شد!',
    'upload-error': 'آپلود ناموفق بود!',
    'clipboard-empty': 'کلیپ‌بورد خالی است!',
    'clipboard-no-file': 'تصویری در کلیپ‌بورد نیست!',
    'unsupported-type': 'نوع فایل پشتیبانی نمی‌شود!',
    'file-too-large': 'فایل خیلی بزرگ است! حداکثر {size} مگابایت',
    'file-size': 'اندازه فایل: {size}',
    'all-apis-failed': 'همه API‌ها ناموفق بودند',
    'no-files-selected': 'فایلی انتخاب نشده است',
    'selected-files-invalid': 'فایل‌های انتخاب شده نامعتبر هستند',
    'copied-format': '{format} کپی شد',
    'copied-all': 'همه لینک‌ها کپی شدند',
    'encryption-failed': 'رمزگذاری ناموفق بود',
    'decryption-failed': 'رمزگشایی ناموفق بود',
    'passphrase-incorrect': 'رمز عبور نادرست است',
    'accessing-file': 'در حال دسترسی به فایل...',
    'file-will-be-public': 'فایل به صورت عمومی به اشتراک گذاشته خواهد شد',
    'download-button': 'دانلود فایل',
    'download-progress': 'پیشرفت دانلود',
    'return-home': 'بازگشت به خانه',
    'passphrase-prompt-title': 'رمز عبور را وارد کنید',
    'passphrase-prompt-label': 'رمز عبور:',
    'passphrase-submit': 'باز کردن',
    'project-repo': 'مخزن پروژه',
    'more-gateways': 'دروازه‌های بیشتر',
    'copyright-text': '© {year} IPFSBED - سرویس میزبانی فایل IPFS غیرمتمرکز',
    'upload-list': 'لیست آپلودها',
  },
  'tr': {
    'meta-title': 'IPFSBED - Merkezi Olmayan IPFS Dosya Barındırma Hizmeti',
    'upload-title': 'Dosya Yükle',
    'file-list': 'dosya',
    'drop-zone': 'Yüklemek için dosya veya klasörleri tıkla / yapıştır / sürükle ve bırak',
    'drop-zone-desc': 'Merkezi olmayan şekilde dosya kaydet ve paylaş',
    'gateway-selector': 'Ağ geçidi seç:',
    'copy-link': 'Bağlantıyı kopyala',
    'copy-share-link': 'Paylaşım bağlantısını kopyala',
    'copy-all': 'Tümünü kopyala',
    'passphrase-placeholder': 'Parola (isteğe bağlı)',
    'batch-share-passphrase-placeholder': 'Parola (isteğe bağlı)',
    'select-all': 'Tümünü seç',
    'deselect-all-btn': 'Seçimi kaldır',
    'share-selected': 'Toplu paylaş',
    'select-for-batch-sharing': 'Toplu paylaşım için seç',
    'batch-share-passphrase-title': 'Toplu paylaşım için parola belirle',
    'batch-share-confirm-copy': 'Onayla ve bağlantıyı kopyala',
    'batch-share-cancel': 'İptal',
    'batch-share-link-copied': 'Toplu paylaşım bağlantısı panoya kopyalandı',
    'batch-encryption-failed': 'Toplu şifreleme başarısız oldu',
    'show-password': 'Parolayı göster',
    'hide-password': 'Parolayı gizle',
    'upload-success': 'Yükleme başarılı!',
    'upload-error': 'Yükleme başarısız!',
    'clipboard-empty': 'Pano boş!',
    'clipboard-no-file': 'Panoda resim yok!',
    'unsupported-type': 'Desteklenmeyen dosya türü!',
    'file-too-large': 'Dosya çok büyük! Maksimum {size}MB',
    'file-size': 'Dosya boyutu: {size}',
    'all-apis-failed': 'Tüm API\'ler başarısız oldu',
    'no-files-selected': 'Dosya seçilmedi',
    'selected-files-invalid': 'Seçilen dosyalar geçersiz',
    'copied-format': '{format} kopyalandı',
    'copied-all': 'Tüm bağlantılar kopyalandı',
    'encryption-failed': 'Şifreleme başarısız oldu',
    'decryption-failed': 'Şifre çözme başarısız oldu',
    'passphrase-incorrect': 'Yanlış parola',
    'accessing-file': 'Dosyaya erişiliyor...',
    'file-will-be-public': 'Dosya herkese açık olarak paylaşılacak',
    'download-button': 'Dosyayı indir',
    'download-progress': 'İndirme ilerlemesi',
    'return-home': 'Ana sayfaya dön',
    'passphrase-prompt-title': 'Parola girin',
    'passphrase-prompt-label': 'Parola:',
    'passphrase-submit': 'Kilidi aç',
    'project-repo': 'Proje Deposu',
    'more-gateways': 'Daha Fazla Ağ Geçidi',
    'copyright-text': '© {year} IPFSBED - Merkezi Olmayan IPFS Dosya Barındırma Hizmeti',
    'upload-list': 'Yükleme Listesi',
  },
  'pt': {
    'meta-title': 'IPFSBED - Serviço de Hospedagem de Arquivos IPFS Descentralizado',
    'upload-title': 'Carregar arquivos',
    'file-list': 'arquivos',
    'drop-zone': 'Clique / Cole / Arraste e solte arquivos ou pastas para carregar',
    'drop-zone-desc': 'Salve e compartilhe arquivos de forma descentralizada',
    'gateway-selector': 'Selecionar gateway:',
    'copy-link': 'Copiar link',
    'copy-share-link': 'Copiar link de compartilhamento',
    'copy-all': 'Copiar tudo',
    'passphrase-placeholder': 'Senha (opcional)',
    'batch-share-passphrase-placeholder': 'Senha (opcional)',
    'select-all': 'Selecionar tudo',
    'deselect-all-btn': 'Desmarcar tudo',
    'share-selected': 'Compartilhamento em lote',
    'select-for-batch-sharing': 'Selecionar para compartilhamento em lote',
    'batch-share-passphrase-title': 'Definir senha para compartilhamento em lote',
    'batch-share-confirm-copy': 'Confirmar e copiar link',
    'batch-share-cancel': 'Cancelar',
    'batch-share-link-copied': 'Link de compartilhamento em lote copiado para a área de transferência',
    'batch-encryption-failed': 'Falha na criptografia em lote',
    'show-password': 'Mostrar senha',
    'hide-password': 'Ocultar senha',
    'upload-success': 'Carregamento bem-sucedido!',
    'upload-error': 'Falha no carregamento!',
    'clipboard-empty': 'Área de transferência vazia!',
    'clipboard-no-file': 'Sem imagem na área de transferência!',
    'unsupported-type': 'Tipo de arquivo não suportado!',
    'file-too-large': 'Arquivo muito grande! Máximo {size}MB',
    'file-size': 'Tamanho do arquivo: {size}',
    'all-apis-failed': 'Todas as APIs falharam',
    'no-files-selected': 'Nenhum arquivo selecionado',
    'selected-files-invalid': 'Arquivos selecionados inválidos',
    'copied-format': '{format} copiado',
    'copied-all': 'Todos os links copiados',
    'encryption-failed': 'Falha na criptografia',
    'decryption-failed': 'Falha na descriptografia',
    'passphrase-incorrect': 'Senha incorreta',
    'accessing-file': 'Acessando arquivo...',
    'file-will-be-public': 'O arquivo será compartilhado publicamente',
    'download-button': 'Baixar arquivo',
    'download-progress': 'Progresso do download',
    'return-home': 'Voltar à página inicial',
    'passphrase-prompt-title': 'Digite a senha',
    'passphrase-prompt-label': 'Senha:',
    'passphrase-submit': 'Desbloquear',
    'project-repo': 'Repositório do Projeto',
    'more-gateways': 'Mais Gateways',
    'copyright-text': '© {year} IPFSBED - Serviço de Hospedagem de Arquivos IPFS Descentralizado',
    'upload-list': 'Lista de Uploads',
  },
  'ko': {
    'meta-title': 'IPFSBED - 분산형 IPFS 파일 호스팅 서비스',
    'upload-title': '파일 업로드',
    'file-list': '파일',
    'drop-zone': '클릭 / 붙여넣기 / 파일 또는 폴더를 드래그 앤 드롭하여 업로드',
    'drop-zone-desc': '분산된 방식으로 파일 저장 및 공유',
    'gateway-selector': '게이트웨이 선택:',
    'copy-link': '링크 복사',
    'copy-share-link': '공유 링크 복사',
    'copy-all': '모두 복사',
    'passphrase-placeholder': '암호 (선택사항)',
    'batch-share-passphrase-placeholder': '암호 (선택사항)',
    'select-all': '모두 선택',
    'deselect-all-btn': '선택 해제',
    'share-selected': '일괄 공유',
    'select-for-batch-sharing': '일괄 공유용 선택',
    'batch-share-passphrase-title': '일괄 공유 암호 설정',
    'batch-share-confirm-copy': '확인 및 링크 복사',
    'batch-share-cancel': '취소',
    'batch-share-link-copied': '일괄 공유 링크가 클립보드에 복사되었습니다',
    'batch-encryption-failed': '일괄 암호화 실패',
    'show-password': '암호 표시',
    'hide-password': '암호 숨기기',
    'upload-success': '업로드 성공!',
    'upload-error': '업로드 실패!',
    'clipboard-empty': '클립보드가 비어 있습니다!',
    'clipboard-no-file': '클립보드에 이미지가 없습니다!',
    'unsupported-type': '지원되지 않는 파일 유형!',
    'file-too-large': '파일이 너무 큽니다! 최대 {size}MB',
    'file-size': '파일 크기: {size}',
    'all-apis-failed': '모든 API 실패',
    'no-files-selected': '선택된 파일 없음',
    'selected-files-invalid': '선택한 파일이 유효하지 않음',
    'copied-format': '{format} 복사됨',
    'copied-all': '모든 링크 복사됨',
    'encryption-failed': '암호화 실패',
    'decryption-failed': '복호화 실패',
    'passphrase-incorrect': '잘못된 암호',
    'accessing-file': '파일에 접근 중...',
    'file-will-be-public': '파일이 공개적으로 공유됩니다',
    'download-button': '파일 다운로드',
    'download-progress': '다운로드 진행 상황',
    'return-home': '홈으로 돌아가기',
    'passphrase-prompt-title': '암호 입력',
    'passphrase-prompt-label': '암호:',
    'passphrase-submit': '잠금 해제',
    'project-repo': '프로젝트 저장소',
    'more-gateways': '더 많은 게이트웨이',
    'copyright-text': '© {year} IPFSBED - 분산형 IPFS 파일 호스팅 서비스',
    'upload-list': '업로드 목록',
  },
  'ja': {
    'meta-title': 'IPFSBED - 分散型IPFSファイルホスティングサービス',
    'upload-title': 'ファイルをアップロード',
    'file-list': 'ファイル',
    'drop-zone': 'クリック / 貼り付け / ファイルまたはフォルダをドラッグ＆ドロップしてアップロード',
    'drop-zone-desc': '分散型でファイルを保存・共有',
    'gateway-selector': 'ゲートウェイを選択：',
    'copy-link': 'リンクをコピー',
    'copy-share-link': '共有リンクをコピー',
    'copy-all': 'すべてコピー',
    'passphrase-placeholder': 'パスワード（任意）',
    'batch-share-passphrase-placeholder': 'パスワード（任意）',
    'select-all': 'すべて選択',
    'deselect-all-btn': '選択解除',
    'share-selected': '一括共有',
    'select-for-batch-sharing': '一括共有用に選択',
    'batch-share-passphrase-title': '一括共有用パスワードを設定',
    'batch-share-confirm-copy': '確認してリンクをコピー',
    'batch-share-cancel': 'キャンセル',
    'batch-share-link-copied': '一括共有リンクがクリップボードにコピーされました',
    'batch-encryption-failed': '一括暗号化に失敗しました',
    'show-password': 'パスワードを表示',
    'hide-password': 'パスワードを隠す',
    'upload-success': 'アップロード成功！',
    'upload-error': 'アップロード失敗！',
    'clipboard-empty': 'クリップボードが空です！',
    'clipboard-no-file': 'クリップボードに画像がありません！',
    'unsupported-type': '対応していないファイル形式です！',
    'file-too-large': 'ファイルが大きすぎます！最大{size}MB',
    'file-size': 'ファイルサイズ：{size}',
    'all-apis-failed': 'すべてのAPIが失敗しました',
    'no-files-selected': 'ファイルが選択されていません',
    'selected-files-invalid': '選択されたファイルが無効です',
    'copied-format': '{format}をコピーしました',
    'copied-all': 'すべてのリンクをコピーしました',
    'encryption-failed': '暗号化に失敗しました',
    'decryption-failed': '復号化に失敗しました',
    'passphrase-incorrect': 'パスワードが間違っています',
    'accessing-file': 'ファイルにアクセス中...',
    'file-will-be-public': 'ファイルは公開で共有されます',
    'download-button': 'ファイルをダウンロード',
    'download-progress': 'ダウンロード進行状況',
    'return-home': 'ホームに戻る',
    'passphrase-prompt-title': 'パスワードを入力',
    'passphrase-prompt-label': 'パスワード：',
    'passphrase-submit': 'ロック解除',
    'project-repo': 'プロジェクトリポジトリ',
    'more-gateways': '他のゲートウェイ',
    'copyright-text': '© {year} IPFSBED - 分散型IPFSファイルホスティングサービス',
    'upload-list': 'アップロードリスト',
  }
};

// Translation function
function _t(key, replacements = {}) {
  // Get translation for current language or fallback to English
  const lang = translations[currentLang] || translations['en'];

  // Get the text or use the key if not found
  let text = lang[key] || translations['en'][key] || key;

  // 自动替换 {year} 为当前年份
  if (text.includes('{year}')) {
    let year;
    try {
      year = (new Date()).getFullYear();
      if (!year || isNaN(year)) year = 2025;
    } catch (e) {
      year = 2025;
    }
    text = text.replace('{year}', year);
  }

  // Replace any placeholders with actual values
  for (const placeholder in replacements) {
    text = text.replace(`{${placeholder}}`, replacements[placeholder]);
  }

  return text;
}

// Initialize language from localStorage or browser preference
function initializeLanguage() {
  // Try to get saved language preference
  let savedLang = localStorage.getItem('ipfsbed_lang');
  
  // If no saved preference, try to use browser language
  if (!savedLang) {
    const browserLang = navigator.language || navigator.userLanguage;
    // Check if we support the full browser language code
    if (translations[browserLang]) {
      savedLang = browserLang;
    } 
    // Check if we support just the primary language code
    else if (browserLang.includes('-')) {
      const primaryLang = browserLang.split('-')[0];
      if (translations[primaryLang]) {
        savedLang = primaryLang;
      }
    }
    
    // Default to English if no matching language found
    if (!savedLang) {
      savedLang = 'zh-CN'; // Chinese as default
    }
    
    // Save to localStorage
    localStorage.setItem('ipfsbed_lang', savedLang);
  }
  
  // Set current language
  currentLang = savedLang;
  return currentLang;
}

// Function to change language
function changeLanguage(lang) {
  if (translations[lang]) {
    currentLang = lang;
    localStorage.setItem('ipfsbed_lang', lang);
    updatePageLanguage();
  }
}

// Update all translatable elements on the page
function updatePageLanguage() {
  // Update elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    element.textContent = _t(key);
  });
  
  // Update elements with data-translate-placeholder attribute
  document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
    const key = element.getAttribute('data-translate-placeholder');
    element.placeholder = _t(key);
  });
  
  // Add specific page language updates if needed
  if (window.updateSharePageLanguage) {
    window.updateSharePageLanguage();
  }
  
  if (window.updateBatchSharePageLanguage) {
    window.updateBatchSharePageLanguage();
  }
}

// Immediately invoke initialization to set language on page load
initializeLanguage();
updatePageLanguage();
